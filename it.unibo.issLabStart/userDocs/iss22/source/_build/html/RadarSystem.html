
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>RadarSystem &#8212; iss22 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Dal motto all’azione" href="Indicazioni.html" />
    <link rel="prev" title="Applicazioni" href="Applicazioni.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="contents topic" id="overview">
<p class="topic-title">Overview</p>
<ul class="simple">
<li><p><a class="reference internal" href="#radarsystem" id="id1">RadarSystem</a></p>
<ul>
<li><p><a class="reference internal" href="#requisiti" id="id2">Requisiti</a></p></li>
<li><p><a class="reference internal" href="#analisi-dei-requisiti" id="id3">Analisi dei Requisiti</a></p>
<ul>
<li><p><a class="reference internal" href="#piano-di-testing" id="id4">Piano di testing</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#analisi-del-problema" id="id5">Analisi del problema</a></p>
<ul>
<li><p><a class="reference internal" href="#un-approccio-bottom-up" id="id6">Un approccio bottom-up</a></p></li>
<li><p><a class="reference internal" href="#un-approccio-top-down" id="id7">Un approccio top-down</a></p>
<ul>
<li><p><a class="reference internal" href="#quali-componenti" id="id8">Quali componenti?</a></p></li>
<li><p><a class="reference internal" href="#oggetti-o-enti-attivi" id="id9">Oggetti o enti attivi?</a></p></li>
<li><p><a class="reference internal" href="#quali-interazioni" id="id10">Quali interazioni?</a></p></li>
<li><p><a class="reference internal" href="#quali-comportamenti" id="id11">Quali comportamenti?</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#progettazione" id="id12">Progettazione</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="radarsystem">
<h1><a class="toc-backref" href="#id1">RadarSystem</a><a class="headerlink" href="#radarsystem" title="Permalink to this headline">¶</a></h1>
<p>Tetendo conto dal nostro motto
<span class="remark">Non c’è codice senza progetto. Non c’è progetto senza analisi del problema. Non c’è problema senza requisiti</span>
impostiamo un processo di produzione del software partendo da un insieme di requisiti.</p>
<section id="requisiti">
<h2><a class="toc-backref" href="#id2">Requisiti</a><a class="headerlink" href="#requisiti" title="Permalink to this headline">¶</a></h2>
<p>Si desidera costruire un’applicazione software capace di:</p>
<ul class="simple">
<li><p>(requisito <span class="blue">radarGui</span>:) mostrare le distanze rilevate da un sensore <code class="docutils literal notranslate"><span class="pre">HC-SR04</span></code> connesso a un RaspberryPi
su un display (<code class="docutils literal notranslate"><span class="pre">RadarDisplay</span></code>) a forma di radar connesso a un PC</p></li>
</ul>
<a class="reference internal image-reference" href="_images/radarDisplay.png"><img alt="_images/radarDisplay.png" class="align-center" src="_images/radarDisplay.png" style="width: 20%;" /></a>
<ul class="simple">
<li><p>(requisito <span class="blue">ledAlarm</span>:) accendere un LED se la distanza rilevata è inferiore a un valore limite prefissato
denominato <code class="docutils literal notranslate"><span class="pre">DLIMIT</span></code>.</p></li>
</ul>
</section>
<section id="analisi-dei-requisiti">
<h2><a class="toc-backref" href="#id3">Analisi dei Requisiti</a><a class="headerlink" href="#analisi-dei-requisiti" title="Permalink to this headline">¶</a></h2>
<p>Iniziamo ponendo al customer una serie di domande e riportiamone le risposte:</p>
<table class="colwidths-given docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Il LED può/deve essere connesso allo stesso RaspberryPi del sonar?</p></td>
<td><p>Al momento si. In futuro però il LED potrebbe essere connesso a un diverso nodo di elaborazione.</p></td>
</tr>
<tr class="row-even"><td><p>Il committente fornisce qualche libreria per la costruzione del display ?</p></td>
<td><p>Si, viene reso disponibile il supporto  <code class="docutils literal notranslate"><span class="pre">radarPojo.jar</span></code> scritto in JAVA che fornisce un oggetto
di classe <code class="docutils literal notranslate"><span class="pre">radarSupport</span></code> capace di creare una GUI in ‘stile radar’ e di visualizzare dati su di essa:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="k">class</span> <span class="nc">radarSupport</span> <span class="p">{</span>
<span class="n">private</span>  <span class="n">static</span> <span class="n">RadarControl</span> <span class="n">radarControl</span><span class="p">;</span>
  <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">setUpRadarGui</span><span class="p">(</span> <span class="p">)</span> <span class="p">{</span>
    <span class="n">radarControl</span> <span class="o">=</span> <span class="n">new</span> <span class="n">RadarControl</span><span class="p">(</span> <span class="n">null</span> <span class="p">);</span> <span class="p">}</span>
       <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">update</span><span class="p">(</span><span class="n">String</span> <span class="n">d</span><span class="p">,</span><span class="n">String</span> <span class="n">theta</span><span class="p">){</span>
              <span class="n">radarControl</span><span class="o">.</span><span class="n">update</span><span class="p">(</span> <span class="n">d</span><span class="p">,</span> <span class="n">theta</span> <span class="p">);</span>
       <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Il supporto è realizzato dal progetto <em>it.unibo.java.radar</em>.</p>
</td>
</tr>
<tr class="row-odd"><td><p>Il valore <code class="docutils literal notranslate"><span class="pre">DLIMIT</span></code> deve essere cablato nel sistema o è bene sia
definibile in modo configurabile dall’utente finale?</p></td>
<td><p>L’utente finale deve essere in grado di specificare in un ‘file di configurazione’ il valore di questa distanza.</p></td>
</tr>
<tr class="row-even"><td><p>Dove deve risiedere il file di configurazione?</p></td>
<td><p>Per agevolare l’utente finale, è bene che il file di configurazione risieda sul PC.</p></td>
</tr>
</tbody>
</table>
<p>Dai requisiti possiamo asserire che:</p>
<ul class="simple">
<li><p>si tratta di realizzare il software per un <em>sistema distribuito</em> costituito da due nodi di elaborazione:
un RaspbeddyPi e un PC convenzionale;</p></li>
<li><p>i due nodi di elaborazione devono potersi <em>scambiare informazione via rete</em>, usando supporti WIFI;</p></li>
<li><p>i due nodi di elaborazione devono essere ‘programmati’ usando <em>tecnologie software diverse</em>.</p></li>
</ul>
<p>In sintesi:</p>
<p><span class="remark">Si tratta di realizzare un sistema software distribuito ed eterogeno</span></p>
<section id="piano-di-testing">
<h3><a class="toc-backref" href="#id4">Piano di testing</a><a class="headerlink" href="#piano-di-testing" title="Permalink to this headline">¶</a></h3>
<p>Un test funzionale consiste nel porre un ostacolo davanti al Sonar
prima a una distanza <code class="docutils literal notranslate"><span class="pre">D</span> <span class="pre">&gt;</span> <span class="pre">DLIMIT</span></code> e poi a una distanza <code class="docutils literal notranslate"><span class="pre">D</span> <span class="pre">&lt;</span> <span class="pre">DLIMIT</span></code> e osservare il valore
visualizzato sulla GUI.</p>
<p>Tuttavia questo modo di procedere non è automatizzabile, in quanto richiede
la presenza di un operatore umano. Nel seguito cercheremo di organizzare le cose in modo
da permettere Test automatizzati.</p>
</section>
</section>
<section id="analisi-del-problema">
<h2><a class="toc-backref" href="#id5">Analisi del problema</a><a class="headerlink" href="#analisi-del-problema" title="Permalink to this headline">¶</a></h2>
<p>Per analizzare le problematiche implicite nei requisiti, possiamo seguire due diversi approcci:</p>
<ul class="simple">
<li><p>approccio <span class="blue">bottom-up</span>: partiamo da quello che abbiamo a disposizione e ‘assembliamo le parti dispoibili’
in modo da costruire un sistema che soddisfa i requisiti funzionali;</p></li>
<li><p>approccio <span class="blue">top-down</span>: partiamo analizzando le proprietà che il sistema deve ‘logicamente’ avere per soddisfare i
requisiti funzionali senza legarci a priori ad alcun specifico componente e/o tecmologia.</p></li>
</ul>
<p>E’ molto probabile che la maggior marte delle persone sia propensa a seguire (almeno inizialmente) un
approccio bottom-up, essendo l’approccio top-down meno riconducibile a enti che sia possibile usare
concretamente come punto di partenza per ‘sintetizzare una soluzione’.</p>
<p>Osserviamo però che <span class="blue">compito della analisi</span> non è quello di trovare una soluzione, ma quello di porre in luce
le problematiche poste dai requisiti (il <span class="red">cosa</span> si deve fare) e capire con quali risorse
(tempo, persone, denaro, etc. )  queste problematiche debbano/possano essere affrontate e risolte.
Sarà compito deo progettisti quello di trovare il modo (il <span class="red">come</span>) pervenore ad una soliuzione ‘ottimale’
date le risorse a disposizione.</p>
<section id="un-approccio-bottom-up">
<h3><a class="toc-backref" href="#id6">Un approccio bottom-up</a><a class="headerlink" href="#un-approccio-bottom-up" title="Permalink to this headline">¶</a></h3>
<p>Il sistema pone le seguenti <span class="blue">problematiche</span>:</p>
<table class="colwidths-given docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Gestione del sensore <code class="docutils literal notranslate"><span class="pre">HC-SR04</span></code>.</p></td>
<td><p>A questo fine la software house dispone già di codice riutilizzabile, ad esempio
<code class="docutils literal notranslate"><span class="pre">SonarAlone.c</span></code> (project it.unibo.rasp2021)</p></td>
</tr>
<tr class="row-even"><td><p>Gestione del display  .</p></td>
<td><p>A questo fine è disponibile il POJO realizato da  <code class="docutils literal notranslate"><span class="pre">radarPojo.jar</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Gestione del LED.</p></td>
<td><p>A questo fine la software house dispone già di codice riutilizzabile, ad esempio
<code class="docutils literal notranslate"><span class="pre">LedControl.py</span></code> (project …)</p></td>
</tr>
<tr class="row-even"><td><p>Quale assemblaggio?</p></td>
<td><a class="reference internal image-reference" href="_images/RobotSonarStarting.png"><img alt="_images/RobotSonarStarting.png" src="_images/RobotSonarStarting.png" style="width: 100%;" /></a>
</td>
</tr>
</tbody>
</table>
<p>La necessità di integrare i componenti disponibili <em>fa sorgere altre problematiche</em>:</p>
<blockquote>
<div><ul class="simple">
<li><p>incapsulare i componenti disponibli entro altri componenti capaci di interagire via rete</p></li>
<li><p>capire dove sia più opportuno inserire la ‘businnss logic’: estendendo il sonar o <code class="docutils literal notranslate"><span class="pre">radarSupport</span></code>?
Oppure introducendo un terzo componente?</p></li>
<li><p>capire quale forma di interazione sia più opportuna: diretta o mediata</p></li>
</ul>
</div></blockquote>
<p>Focalizzando l’attenzione sulla interazione sonar-radarSupport possiamo rappresentare la situazione come segue:</p>
<table class="colwidths-given docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Comunicazione diretta:</p></td>
<td><a class="reference internal image-reference" href="_images/srrIntegrate1.png"><img alt="_images/srrIntegrate1.png" src="_images/srrIntegrate1.png" style="width: 100%;" /></a>
</td>
</tr>
<tr class="row-even"><td><p>Comunicazione mediata:</p></td>
<td><a class="reference internal image-reference" href="_images/srrIntegrate2.png"><img alt="_images/srrIntegrate2.png" src="_images/srrIntegrate2.png" style="width: 100%;" /></a>
</td>
</tr>
</tbody>
</table>
<p>Il meditore potrebbe anche fungere da componente capace di realizzare la logica applicativa.
Ma è giusto/opportuno procedere i questo modo?</p>
<p>Seguendo un punto di vista logico e il principio <span class="red">xxx</span> possiamo sostenre, come analisti del problema,
l’opportunità di introdurre un componente (<code class="docutils literal notranslate"><span class="pre">Controller</span></code>), diverso dai dispositivi, che abbia la
<span class="blue">responabilità di realizzare la logica applicativa</span>.</p>
<p>Ma ecco sorgere un’altra problematica:</p>
<table class="colwidths-given docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Distribuzione.</p></td>
<td><p>Il <code class="docutils literal notranslate"><span class="pre">Controller</span></code> deve ricevere in ingresso i dati del sensore <code class="docutils literal notranslate"><span class="pre">HC-SR04</span></code>, elaborarli e
inviare comendi al LED e dati alla RADAR-GUI.</p>
<p>Il <code class="docutils literal notranslate"><span class="pre">Controller</span></code> puo risiedere su RaspberryPi, sul PC o su un terzo nodo.</p>
<p>Un colloquio con il committente esclude (per motivi di costo) la possibilità di introdurre un terzo
nodo di elaborazione.</p>
</td>
</tr>
</tbody>
</table>
<p>Dunque si tratta di analizzare se sia meglio allocare il <code class="docutils literal notranslate"><span class="pre">Controller</span></code> sul RaspberryPi o sul PC.</p>
<table class="colwidths-given docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Controller</span></code> sul RaspberryPi.</p></td>
<td><p>Pro</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Controller</span></code> sul PC.</p></td>
<td><p>Pro</p></td>
</tr>
</tbody>
</table>
</section>
<section id="un-approccio-top-down">
<h3><a class="toc-backref" href="#id7">Un approccio top-down</a><a class="headerlink" href="#un-approccio-top-down" title="Permalink to this headline">¶</a></h3>
<p>Nell’impostare l’analisi del problema posto dai requisiti, partiamo ora considerando il sistema nel suo
complesso e non dai singoli dispositivi (di input/output).</p>
<p>Questo ‘ribaltamento’ di impostazione ci induce a focalizzare l’attenzione su tre dimensioni fondamentali:</p>
<ul class="simple">
<li><p>la <span class="blue">struttura</span> del sistema, cioè di quali parti è composto;</p></li>
<li><p>la <span class="blue">connessione/interazione</span> tra le parti del sistema in modo da formare un ‘tutto’ con precise proprietà
non (completamente) riducibili a quelle delle singole parti;</p></li>
<li><p>il <span class="blue">comportamento</span> (autonomo o indotto) di ogni singola parte in modo che siano assicurate le interazioni
volute.</p></li>
</ul>
<p>Un modo per considerare in modo unitario queste tre dimensioni è quello di impostare l’<span class="blue">architettura</span>
del sistema, cerando di dare risposta a un insieme di domande fondamentali:</p>
<section id="quali-componenti">
<h4><a class="toc-backref" href="#id8">Quali componenti?</a><a class="headerlink" href="#quali-componenti" title="Permalink to this headline">¶</a></h4>
<p>Quali componenti fanno sicuramente parte del sistema, considerando i requisiti?</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Il sistema deve possedere parti software capaci di gestire il <span class="blue">Sonar</span>, il <span class="blue">RadarDisplay</span> e il <span class="blue">Led</span>.
Questi componenti rappresentano dispositivi di input/ouput ovvero sensori ed attuatori.
Ma un dispostivo di I/O non dovrebbe mai includere codice relativo alla logica applicativa.</p>
<p>Dunque la nostra analisi ci induce a introdurre un altro componente, che denominiamo  <span class="blue">Controller</span>,
con l’idea i dispositivi di I/O possano  essere riusati, senza varuazioni, per fomare molti sistemi diversi
modificando in modo opportuno solo il <code class="docutils literal notranslate"><span class="pre">Controller</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="oggetti-o-enti-attivi">
<h4><a class="toc-backref" href="#id9">Oggetti o enti attivi?</a><a class="headerlink" href="#oggetti-o-enti-attivi" title="Permalink to this headline">¶</a></h4>
<p>Considerando (il software relativo a) ciascun componente, questo può/deve essere visto come un <span class="blue">oggetto</span>
che definisce operazioni attivabili con chiamate di procedura o come un
<span class="blue">ente attivo</span> capace di comportamento autonomo?</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Analizzando il software disponibile, possiamo dire che:</p>
<ul>
<li><p>il <code class="docutils literal notranslate"><span class="pre">Sonar</span></code> è un ente attivo che scrive dati su un dispositivo standard di output</p></li>
<li><p>il <code class="docutils literal notranslate"><span class="pre">Led</span></code> è un oggetto  che implementa l’interfaccia</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">interface</span> <span class="n">ILed</span> <span class="p">{</span>
     <span class="n">void</span> <span class="n">turnOn</span><span class="p">()</span>
     <span class="n">void</span> <span class="n">turnOff</span><span class="p">()</span>
     <span class="n">boolean</span> <span class="n">isOn</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>il <code class="docutils literal notranslate"><span class="pre">radarSupport</span></code> è un oggetto singleton che può essere usato invocando il metodo <code class="docutils literal notranslate"><span class="pre">update</span></code></p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Se anche il <code class="docutils literal notranslate"><span class="pre">RadarDisplay</span></code> fosse sul RaspberryPi, il <code class="docutils literal notranslate"><span class="pre">Controller</span></code> potrebbe essere definito come segue:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="kc">True</span> <span class="p">:</span>
  <span class="n">d</span> <span class="o">=</span> <span class="n">Sonar</span><span class="o">.</span><span class="n">getDistance</span><span class="p">()</span>
  <span class="n">radarSupport</span><span class="o">.</span><span class="n">update</span><span class="p">(</span> <span class="n">s</span><span class="p">,</span><span class="mi">90</span> <span class="p">)</span>
  <span class="k">if</span><span class="p">(</span> <span class="n">d</span> <span class="o">&lt;</span>  <span class="n">DLIMIT</span> <span class="p">)</span>  <span class="n">then</span> <span class="n">Led</span><span class="o">.</span><span class="n">turnOn</span><span class="p">()</span> <span class="k">else</span> <span class="n">Led</span><span class="o">.</span><span class="n">TurnOff</span><span class="p">()</span>
</pre></div>
</div>
<p>Da un punto di vista logico, il <code class="docutils literal notranslate"><span class="pre">Controller</span></code> è un ente attivo
che può operare sul PC o sul RaspberryPi (un terzo nodo è escluso).</p>
<ul class="simple">
<li><p>Nel caso operi sul PC, lo schema precedente non va più bene,
perchè il <code class="docutils literal notranslate"><span class="pre">Controller</span></code> deve poter interagire via rete con il <code class="docutils literal notranslate"><span class="pre">Sonar``e</span> <span class="pre">con</span> <span class="pre">il</span> <span class="pre">``Led</span></code>.
Inoltre, il <code class="docutils literal notranslate"><span class="pre">Sonar``e</span> <span class="pre">il</span> <span class="pre">``Led</span></code> devono essere <span class="blue">embedded</span> in qualche altro componente
capace di ricevere/trasmettere messaggi.</p></li>
<li><p>Nel caso operi sul RaspberryPi, lo schema precedente non va più bene,
perchè il <code class="docutils literal notranslate"><span class="pre">Controller</span></code>  deve poter interagire via rete con il <code class="docutils literal notranslate"><span class="pre">RadarDisplay</span></code>.
In questo caso il  <code class="docutils literal notranslate"><span class="pre">RadarDisplay</span></code> si presenta come un ente attivo capace di ricevere/trasmetter messaggi
utilizzando poi <code class="docutils literal notranslate"><span class="pre">radarSupport</span></code> per visualizzare l’informazione ricevuta dal <code class="docutils literal notranslate"><span class="pre">Controller</span></code>.</p></li>
</ul>
</section>
<section id="quali-interazioni">
<h4><a class="toc-backref" href="#id10">Quali interazioni?</a><a class="headerlink" href="#quali-interazioni" title="Permalink to this headline">¶</a></h4>
<p>Come punto saliente della analisi condotta fino a questo punto possiamo affermare che:</p>
<p><span class="remark">Il problema ci induce a parlare di interazioni basate su messaggi.</span></p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Di fronte alla necessità di progettare e realizzare <em>sistemi software distribuiti</em>,
la programmazione ad oggetti comincia a mostrare i suoi limiti
e si richiede un ampliamento dello spazio concettuale di riferimento.</p>
<p>A questo riguardo, può essere opportuno affrontare il passaggio <span class="blue">dagli oggetti agli attori</span> come
passaggio preliminare per il passaggio <em>da sistemi concentrati a sistemi distribuiti</em>.</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="quali-comportamenti">
<h4><a class="toc-backref" href="#id11">Quali comportamenti?</a><a class="headerlink" href="#quali-comportamenti" title="Permalink to this headline">¶</a></h4>
<p>Il comportamento di ciascun componente ha ora l’obiettivo principale di <span class="blue">realizzare le interazioni</span> che
permettono alle ‘parti’  di agire in modo da formare un ‘tutto’ (il sistema) capace di soddifare i requisiti
funzionali attraverso opportune elaborazioni delle informazioni ricevute e tramesse tra i componenti stessi.</p>
<p>Il <code class="docutils literal notranslate"><span class="pre">Controller</span></code> potrebbe essere ora definito come segue:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="kc">True</span> <span class="p">:</span>
  <span class="n">chiedi</span> <span class="n">al</span> <span class="n">Sonar</span> <span class="n">o</span> <span class="n">ricevi</span> <span class="n">dal</span> <span class="n">Sonar</span> <span class="n">un</span> <span class="n">valore</span> <span class="n">d</span>
  <span class="n">invia</span> <span class="n">il</span> <span class="n">valore</span> <span class="n">d</span> <span class="n">al</span> <span class="n">RadarDisplay</span> <span class="ow">in</span> <span class="n">modo</span> <span class="n">che</span> <span class="n">lo</span> <span class="n">visualizzi</span>
  <span class="k">if</span><span class="p">(</span> <span class="n">d</span> <span class="o">&lt;</span>  <span class="n">DLIMIT</span> <span class="p">)</span> <span class="n">then</span>
     <span class="n">invia</span> <span class="n">al</span> <span class="n">Led</span> <span class="n">un</span> <span class="n">comando</span> <span class="n">di</span> <span class="n">accensione</span>
  <span class="k">else</span> <span class="n">invia</span> <span class="n">al</span> <span class="n">Led</span> <span class="n">un</span> <span class="n">comando</span> <span class="n">di</span> <span class="n">spegnimento</span>
</pre></div>
</div>
<p>Il comportamento degli altri disposivi è una conseguenza logica di questo.</p>
</section>
</section>
</section>
<section id="progettazione">
<h2><a class="toc-backref" href="#id12">Progettazione</a><a class="headerlink" href="#progettazione" title="Permalink to this headline">¶</a></h2>
<p>Partendo dall’analisi top-down, impostiamo un componente (che denominiamo al momento genericamente <span class="blue">enabler</span>)
capace di ricevere-trasmettere messaggi vie rete e di ricondurre i messaggi ricevuti alla esecuzione di
metodi di un oggetto ‘embedded’ locale.</p>
<table class="colwidths-given docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 70%" />
<col style="width: 30%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>L’idea è che l’<cite>enabler</cite> dovrebbe svolgere rispetto all’oggetto embedded una funzione analoga alle tute
in stile ‘IronMan’, in modo da costruire un microservizio.</p></td>
<td><a class="reference internal image-reference" href="_images/TutaVolo.jpg"><img alt="_images/TutaVolo.jpg" src="_images/TutaVolo.jpg" style="width: 100%;" /></a>
</td>
</tr>
</tbody>
</table>
<p>Ad esempio, con riferimento al <code class="docutils literal notranslate"><span class="pre">Led</span></code>, l’<cite>enabler</cite> dovrebbe comportarsi come segue:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">led</span> <span class="p">:</span> <span class="n">ILed</span>
<span class="k">while</span> <span class="kc">True</span> <span class="p">:</span>
  <span class="n">attendi</span> <span class="n">un</span> <span class="n">messaggio</span> <span class="n">di</span> <span class="n">comando</span>
  <span class="n">analizza</span> <span class="n">il</span> <span class="n">contenuto</span> <span class="k">del</span> <span class="n">comando</span> <span class="n">ed</span> <span class="n">esegui</span>
     <span class="n">led</span><span class="o">.</span><span class="n">turnOn</span><span class="p">()</span>
        <span class="n">oppure</span>
     <span class="n">led</span><span class="o">.</span><span class="n">turnOff</span><span class="p">()</span>
</pre></div>
</div>
<p>TODO:</p>
<ul class="simple">
<li><p>enabler come server Python o come server Java</p></li>
<li><p>Led come classe Python o  Java</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>//From C:\Didattica2018Work\iss2020LabBo\it.unibo.qak.radar2020\resources\sonarRadarOnTcp
package sonarRadarOnTcp
/*
radarGuiAsTcpServer.kt
------------------------------------------------------------------------------------------
A scheme for a radarGui that works as a TCP server
The structure of the code arises from the technology-support (socket in java.net libray)
------------------------------------------------------------------------------------------
*/
import it.unibo.kactor.MsgUtil
import java.net.ServerSocket
import it.unibo.`is`.interfaces.protocols.IConnInteraction  //WARNING !!!
import lowLevelComms.tcpConnSupport
import highLevelComms.hlComm

var hlServerCommSupport : hlComm?  =  null

fun serverStartUp( port:Int ){
   println(&quot;server | init ...  &quot;)
   val serverSocket    = lowLevelComms.tecnoSupport.connectAsReceiver( port )
   val conn            = waitForConn( serverSocket )
   hlServerCommSupport = hlComm( conn )
}

fun waitForConn( serverSocket : ServerSocket ) : IConnInteraction{
   val socket       = lowLevelComms.tecnoSupport.acceptAConnection(serverSocket)
   println(&quot;server | new connection set  &quot;)
   return tcpConnSupport( socket )
}

fun serverWork(){
   println(&quot;server | waits for message ...&quot;)
   val msg = hlServerCommSupport!!.receive()
   println(&quot;server | received: $msg&quot; )
}

fun main() {
   println(&quot;server | BEGIN&quot;)
   serverStartUp( 8010 )
   serverWork()
   println(&quot;server | END&quot;)
}

//CLIENT

package sonarRadarOnTcp
/*
robotSonarAsTcpClient.kt
*/
import java.net.Socket
import java.net.ServerSocket
import it.unibo.kactor.ApplMessage
import it.unibo.kactor.MsgUtil
import it.unibo.`is`.interfaces.protocols.IConnInteraction  //WARNING !!!
import lowLevelComms.tcpConnSupport
import highLevelComms.hlComm

var hlCommSupport : hlComm? =  null

fun lowLevelConnect( host:String, port:Int ) : IConnInteraction{
   val socket  = lowLevelComms.tecnoSupport.connectAsClient(host,port)
   return tcpConnSupport( socket )
}

fun clientStartUp(){
   val conn = lowLevelConnect(&quot;localhost&quot;, 8010 )
   hlCommSupport = hlComm( conn )
}

fun clientWork(){
   println(&quot;client | sending ... &quot;)
   hlCommSupport!!.forward(&quot;sonar&quot;,&quot;polar&quot;,&quot;polar(40,0)&quot;,&quot;radargui&quot;)
}

fun main() {
   println(&quot;client | BEGIN&quot;)
   clientStartUp()
   clientWork()
   println(&quot;client | END&quot;)
}
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/logo-unibo.gif" alt="Logo"/>
    
    <h1 class="logo logo-name">iss22</h1>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="CostruzioneSoftware.html">Costruzione del software</a></li>
<li class="toctree-l1"><a class="reference internal" href="Strumenti%20per%20lo%20sviluppo.html">Strumenti per lo sviluppo</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tecnologie.html">Tecnologie</a></li>
<li class="toctree-l1"><a class="reference internal" href="Architetture.html">Architetture</a></li>
<li class="toctree-l1"><a class="reference internal" href="AttoriQak.html">Attori qak</a></li>
<li class="toctree-l1"><a class="reference internal" href="RaspberryPi.html">RaspberryPi</a></li>
<li class="toctree-l1"><a class="reference internal" href="RaspberrySoftware.html">RaspberrySoftware</a></li>
<li class="toctree-l1"><a class="reference internal" href="Robots.html">Robots</a></li>
<li class="toctree-l1"><a class="reference internal" href="Applicazioni.html">Applicazioni</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">RadarSystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="Indicazioni.html">Dal motto all’azione</a></li>
<li class="toctree-l1"><a class="reference internal" href="Domande.html">Domande</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="Applicazioni.html" title="previous chapter">Applicazioni</a></li>
      <li>Next: <a href="Indicazioni.html" title="next chapter">Dal motto all’azione</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Antonio Natali.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/RadarSystem.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>