	<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <!--
<link rel="stylesheet" type="text/css" href="../css/issStyle1.css">
<script type="text/javascript" src="../css/issStyle.js"></script>
-->
<style type="text/css">
body
{
    margin-left:  30px;
    margin-right: 30px;
};

P
{
    font-family: Tahoma;
    font-size: 10pt;
};

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
	font-size: 93%;
}

a:hover {
    background-color: #cccccc;
}


hr {
    clear: both;
    height: 1px;
    color: #242424;
    background-color: transparent;
}

h1, h2, h3 {
    color: #242424;
    clear: left;
    font: 100% Tahoma, Helvetica, Arial, sans-serif;
    margin-bottom: 0.5em;
    padding-top: 0.5em;
	border-radius: 10px;
	padding: 5px;
}

top {
	width: 100%;
}


#i {
    color: #ff1010;
}
tt{
	font-family: "Arial";
    font-size: 90%;
	color: #006600;
}
em{
	font-family: "Arial";
    font-size: 80%;
	font-weight: bold;
	border-style:solid;
	border-color: #abe876;
    color: #1632cc;
}
bc{
	font-family: "Arial";
	font-size: 90%;
	font-weight: bold;
    color: #990000;
	background-color: #fcf8c7;
}
ks{
	font-family: "Arial";
	font-weight: bold;
    color: #0000CD	;
	font-size: 90%;
}
kc{
	font-family: "Arial";
	font-weight: bold;
    color: #008000	;
	font-size: 90%;
}
pre{
	font-family: "Consolas";
	font-size: 85%;
	background-color: #f5f5f5;
	border: 1.5px solid silver;
	padding: 5px;
}
m{
	font-family: "Helvetica";
	line-height: 100%;
 	font-size: 75%;
}
div.body{
	 
    font-size: 18px;
}
k{
    color: #990000;
	font-weight: bold;
	font-size: 90%;
}
h1 {
    font-size: 150%;
    background-color: #b2c0ff;
	padding: 10px;
}

h2 {
    background-color: #9ed8ff;
    font-size: 130%;
}

h3 {
	background-color: #e6ccff;
    font-size: 100%;
}
h4 {
    background-color: #ccffcc;
    font-size: 100%;
	width: 95%;
	border-radius: 5px;
	padding: 2px;
}
h5 {
    background-color: #d5ffb0;
    font-size: 100%;

}
div.req{
	background-color: #d9ffb3;
    font-size: 18px;
	width: 700px;
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}
div.remark{
	background-color: #E3F2FD;
    border: 1.5px solid #d5f2ed;
    padding: 15px;
    margin: 10px;
	border-radius: 25px;
}
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}

ol, ul, li {
  margin: 0;
  margin-left: 10px;
  padding: 0;
  padding-bottom: 5px;
}

table, th, td {
	border: 1px solid black;
}

img {
	border: 1.5px solid #d5f2ed

}

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
}

div.wrapdesc{
	width: 90%;
	margin: auto;
}

div.imagedesc{
	width: 85%;
	margin: auto;
}
</style>
    
<head>
   
<title>CautiousExplorerActors</title></head>
    
<body>
<div id="top">
<h1>Lab ISS | the RobotService<font size="5"></font> </h1>
</div>  

<div class="body"> 
<h2>Introduction</h2>
 
 
<h2>Embedding 
<a href="../../it.unibo.kotlinSupports/app/src/main/kotlin/it/unibo/actor0robot/StepRobotActor.kt" target="code">
<ks>StepRobotActor.kt</ks></a>
into a service</h2>

The <a href="../../it.unibo.kotlinSupports/app/src/main/kotlin/it/unibo/actor0robot/StepRobotActor.kt" target="code">
<ks>StepRobotActor.kt</ks></a> is implemented in Kotlin in the project 
<a href="../../it.unibo.kotlinSupports" target="code">it.unibo.kotlinSupports</a>.
<br/> 
In order to facilitate the usage of such a component, we embed it in a 'service' that accepts messages of type
<a href="../../it.unibo.kotlinSupports/app/src/main/kotlin/it/unibo/actor0robot/ApplMessage.kt" target="web">
<ks>ApplMessage.kt</ks></a> sent over the TCP port <ks>8010</ks>.
<br/> 
See <a href="../../it.unibo.kotlinSupports/userDocs/wssupportAsActorKotlin.html" target="web">
<tt>LabIss2021 | wshttp support with ActorBasicKotlin observers</tt></a> in the project <a href="../../it.unibo.kotlinSupports" target="web">
<ks>it.unibo.kotlinSupports</ks></a>.
<br/> 
Let us report here some detail about its implementation.<br/><br/> 


<table style="width:98%">
<tbody>	
<tr>
<td style="width:50%" >
 
 
In project <a href="../../it.unibo.kotlinSupports" target="web">it.unibo.kotlinSupports</a>:
<ul>
<li>
<a href="../../it.unibo.kotlinSupports/app/src/main/kotlin/it/unibo/actor0/ActorContextTcpServer.kt" target="web">
<ks>ActorContextTcpServer.kt</ks></a><br/>
<m>
<ul>
<li>Uses a <tt>FactoryProtocol</tt> utilty that returns an object that implements the interface <tt>IConnInteraction</tt>.
</li>
</ul>


<h4>The <tt>unibonoawtsupports</tt> </h4>
 
The unibo library <bc>unibonoawtsupports.jar</bc> provides a support for communications based on connection-based, 
two-way protocols such as <tt>TCP, UDP</tt>, etc. or a serial line (the case of <tt>Arduino</tt>).  

<center><img src="./img/noawtsupport.png" alt="noawtsupport" width="50%" height="40%"></center>

The library is a first step towards a  
<a href="#infras" target="code">custom infrastructure</a> and includes:
<ul>
<li>a set of specialized factories (<tt>FactoryTcpProtocol</tt>, <tt>FactoryUdpProtocol</tt>, etc.) that 
provide protocol-specific supports (sockets, datagrams etc);  </li>
<li> the factory <bc>FactoryProtocol</bc> that hides  details related to the specific protocol.
Each operation of the factory returns an object that implements the interface <bc>IConnInteraction</bc> 
(defined in the custom library <bc>uniboInterfaces.jar</bc>) 
that can be used to send/receive information on the connection.

<pre>
public interface IConnInteraction {
    void sendALine(String s) throws Exception;
    String receiveALine() throws Exception;
    void closeConnection() throws Exception;
}
</pre>
</m>
</td>
<td>
 <center><img src="./img/RobotServiceZooming.png" alt="RobotServiceZooming" width="100%" ></center>
  <br/><br/>
 In project <a href="../../it.unibo.kotlinSupports" target="web">it.unibo.kotlinSupports</a>:
 

<ul>
<li><a href="../../it.unibo.kotlinSupports/app/src/main/kotlin/it/unibo/actor0/ActorBasicContextKb.kt" target="web">
<ks>ActorBasicContextKb.kt</ks></a>
<m>
<ul>
<li>Stores knowledge about actors ruuning in the local node</li>
</ul></m>
</li>

<li>
<a href="../../it.unibo.kotlinSupports/app/src/main/kotlin/it/unibo/supports/IssWsHttpKotlinSupport.kt" target="web">
<ks>IssWsHttpKotlinSupport.kt</ks></a><br/>
<m><ul>
<li>The kotlin version of the support introduced in

<a href="../../it.unibo.boundaryWalk/app/src/main/java/it/unibo/robotSupports/IssWsSupport.java" target="web">
IssWsSupport.java</a><br/>

</li>

</ul>


</td>
</tr>

 

 </tbody>
</table>

<h2>Sprint review: <i>Divide et impera?</i></h2>
<table style="width:98%">
<tbody>	
<tr>
<td style="width:40%" >
<h3>Step+Basic: case 0</h3>

</td>
<td>
<center><img src="./img/StepAndBasicWrong.png" alt="StepAndBasicWrong" width="50%" ></center> 

</td>
</tr>

<tr>
<td><h3>Step+Basic: case 1</h3>
<pre>
BasicRobotActor

Accept a
    msg(engage,dispatch,SENDER,basicRobot,do,N)
    msg(robotmove,dispatch,SENDER,basicRobot,
	           <ks>{"robotmove":"MOVE"@ "TIME": 300}</ks>,N)

Observes
    all the messages (events) sent by the WEnv

Propagates
    the result of a move to the SENDER (connected TCP client)
    the WEnv events to the external connected TCP clients

</pre>

</td>
<td>
<center><img src="./img/StepAndBasicArch1.png" alt="StepAndBasicArch1" width="80%" ></center> 
</td>
</tr>

<tr>
<td><h3>Step+Basic: case 2</h3>
</td>
<td>
<center><img src="./img/StepAndBasicArch2.png" alt="StepAndBasicArch2" width="90%" ></center> 
</td>
</tr>


<tr>
<td><h3>Step+Basic: case 3</h3>
<a href="../../it.unibo.kotlinSupports/app/src/main/kotlin/it/unibo/robotService/BasicStepRobotActor.kt" target="code">
<ks>BasicStepRobotActor	.kt</ks></a>
</td>
<td>
<center><img src="./img/BasicStepRobotActor.png" alt="BasicStepRobotActor" width="90%" ></center> 
<br/><br/>


</td>
</tr>
 
 
 
 </tbody>
</table>


  
<!-- USEFUL
<table style="width:100%" border="1">
<tr>
<td style="width:50%">
</td>
<td></td>
</tr>
</table>
 QUESTIONS:
chiarisce cosa il committente intende con 'Optionally'  
chiarisce cosa il committente intende con 'should remember' 
chiarisce cosa il committente intende con 'mental map'
definisce la user story in modo da comprendere TUTTI i requisiti (anche opzionali)
discute se sia meglio avvalersi di HTTP o delle websocket e perchè
discute se sia meglio usare il linguaggio di comando cril, aril (o altro) e perchè
discute se sia meglio muovere il robot in modo random o in modo organizzato 
discute se il ritorno alla den debba/possa avvenire senza ricalcare il percorso effettuato
presenta ogni TestPlan collegandolo ad una user story e in modo 'concreto' (non come un insieme di intenti)
propone diverse tipologie di scene/situazioni per il testing
individua e propone (motivandola) una lista di priorità per il soddisfacimento dei requisiti 
presenta una stima dei tempi di realizzazione 
presenta un elenco delle risorse che sarebbe opportuno avere e/o procurarsi
presenta una architettura di progetto
presenta dettagli di progetto che permettono una precisa implementazione da parte di chi legge
pone in evidenza le parti di funzionamento proattivo e quelle di funzionamento reattivo
ECCEDE nelle dimensioni del file (al momento > 1600Kb)


<table style="width:98%">
<tbody>	
<tr>
<td style="width:50%" >
 

</td>
<td>
</td>
</tr>
 </tbody>
</table>
-->
	      	
<br/><br/> 	
</div>  

</div>  
<div style="background-color:rgba(86, 56, 253, 0.9); width:100%;text-align:center;font-size:small;color:white">
By AN Unibo-DISI    
</div> 
</body>
</html>